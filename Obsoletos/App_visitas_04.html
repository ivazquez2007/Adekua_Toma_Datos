<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>üì± Toma de Datos - Detalles T√©cnicos</title>
    <style>
        :root { --primary: #0056b3; --accent: #e67e22; --bg: #f4f6f8; --success: #27ae60; --danger: #c0392b; }
        body { font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, sans-serif; background: var(--bg); margin: 0; padding: 0; padding-bottom: 80px; }
        
        /* HEADER */
        header { background: var(--primary); color: white; padding: 15px; text-align: center; position: sticky; top: 0; z-index: 100; box-shadow: 0 2px 5px rgba(0,0,0,0.2); }
        h1 { margin: 0; font-size: 1.1rem; text-transform: uppercase; letter-spacing: 1px; }

        /* TABS DE NAVEGACI√ìN */
        .nav-tabs { display: flex; background: white; border-bottom: 1px solid #ddd; position: sticky; top: 50px; z-index: 90; }
        .tab-btn { flex: 1; padding: 15px 5px; border: none; background: none; font-weight: 600; color: #7f8c8d; cursor: pointer; border-bottom: 3px solid transparent; transition: 0.3s; }
        .tab-btn.active { color: var(--primary); border-bottom-color: var(--primary); background: #f8f9fa; }
        
        /* CONTENEDOR PRINCIPAL */
        .container { max-width: 800px; margin: 0 auto; padding: 15px; }
        .section { display: none; animation: fadeIn 0.3s ease-in-out; }
        .section.active { display: block; }
        @keyframes fadeIn { from { opacity: 0; transform: translateY(5px); } to { opacity: 1; transform: translateY(0); } }

        /* TARJETAS */
        .card { background: white; padding: 20px; border-radius: 8px; box-shadow: 0 2px 8px rgba(0,0,0,0.05); margin-bottom: 15px; border: 1px solid #e1e4e8; }
        h2 { font-size: 1rem; color: var(--primary); border-bottom: 1px solid #eee; padding-bottom: 10px; margin-top: 0; margin-bottom: 15px; }
        h3 { font-size: 0.9rem; color: #555; margin-bottom: 5px; font-weight: 600; }
        
        /* FORMULARIOS */
        label { display: block; margin-top: 12px; font-weight: 600; font-size: 0.85rem; color: #34495e; }
        input[type="text"], input[type="number"], input[type="date"], select, textarea { width: 100%; padding: 10px; margin-top: 5px; border: 1px solid #ced4da; border-radius: 4px; box-sizing: border-box; font-size: 1rem; }
        input:focus, select:focus, textarea:focus { border-color: var(--primary); outline: none; box-shadow: 0 0 0 3px rgba(0,86,179,0.1); }
        
        /* CHECKBOX PERSONALIZADO */
        .check-group { display: flex; align-items: center; padding: 8px 0; border-bottom: 1px solid #f1f1f1; }
        .check-group input { width: 18px; height: 18px; margin-right: 10px; accent-color: var(--primary); }
        
        /* BOTONES */
        .btn-full { width: 100%; padding: 12px; border: none; border-radius: 6px; font-weight: bold; font-size: 1rem; cursor: pointer; margin-top: 10px; text-align: center; }
        .btn-add { background: var(--success); color: white; }
        .btn-save { background: var(--primary); color: white; box-shadow: 0 -2px 10px rgba(0,0,0,0.1); }
        .remove-btn { position: absolute; top: 10px; right: 10px; color: var(--danger); background: none; border: none; font-size: 1.5rem; line-height: 1; cursor: pointer; }

        /* SELECTOR DE SISTEMA */
        .sys-selector { display: flex; gap: 10px; }
        .sys-btn { flex: 1; padding: 15px; border: 2px solid #dfe6e9; border-radius: 8px; background: white; font-weight: bold; cursor: pointer; text-align: center; transition: 0.2s; }
        .sys-btn.active { border-color: var(--primary); background: #ebf5fb; color: var(--primary); }

        /* ESTILOS CONDICIONALES */
        .hidden { display: none !important; }
        .conditional-box { background-color: #fff8e1; border: 1px solid #ffe0b2; padding: 15px; border-radius: 6px; margin-top: 10px; }
        .detail-box { background-color: #e3f2fd; border: 1px solid #bbdefb; padding: 15px; border-radius: 6px; margin-top: 10px; }

        /* TRAMOS */
        .tramo-card { background: #fdfdfd; border-left: 4px solid var(--accent); padding: 15px; margin-bottom: 10px; position: relative; border-radius: 4px; border: 1px solid #eee; border-left-width: 4px; }

        /* FOTOS */
        #canvas-container { position: relative; width: 100%; height: 300px; border: 2px dashed #ccc; margin: 10px 0; background: #eee; display: flex; align-items: center; justify-content: center; overflow: hidden; }
        canvas { max-width: 100%; max-height: 100%; }
        .gallery { display: grid; grid-template-columns: repeat(auto-fill, minmax(80px, 1fr)); gap: 8px; margin-top: 15px; }
        .thumb { width: 100%; height: 80px; object-fit: cover; border-radius: 4px; border: 1px solid #ccc; }
        
        /* FOOTER */
        .footer-fixed { position: fixed; bottom: 0; left: 0; width: 100%; padding: 10px; background: white; border-top: 1px solid #ddd; z-index: 999; display: flex; gap: 10px; box-sizing: border-box; }
    </style>
</head>
<body>

<header>
    <h1>üìê Toma de Datos T√©cnica v3</h1>
</header>

<div class="nav-tabs">
    <button class="tab-btn active" onclick="switchTab('tab-general')">1. General</button>
    <button class="tab-btn" onclick="switchTab('tab-tecnico')">2. Soportes</button>
    <button class="tab-btn" onclick="switchTab('tab-geometria')">3. Medidas</button>
    <button class="tab-btn" onclick="switchTab('tab-fotos')">4. Fotos</button>
</div>

<div class="container">

    <div id="tab-general" class="section active">
        <div class="card">
            <h2>Datos del Proyecto</h2>
            <label>Cliente</label><input type="text" id="g-client">
            <label>Obra</label><input type="text" id="g-site">
            <label>Fecha</label><input type="date" id="g-date">
        </div>

        <div class="card">
            <h2>Sistema a Presupuestar</h2>
            <div class="sys-selector">
                <div class="sys-btn active" id="btn-barandilla" onclick="setSystem('barandilla')">
                    üõ°Ô∏è Barandilla
                </div>
                <div class="sys-btn" id="btn-linea" onclick="setSystem('linea_vida')">
                    ‚öì L√≠nea de Vida
                </div>
            </div>
        </div>
        <p style="text-align:center; color:#666;">Selecciona el sistema y pulsa "2. Soportes"</p>
    </div>

    <div id="tab-tecnico" class="section">
        
        <div id="tech-barandilla">
            <div class="card">
                <h2>Fijaci√≥n Barandilla</h2>
                <label>Tipo de Fijaci√≥n</label>
                <select id="b-fix-type" onchange="toggleBarandillaOpts()">
                    <option value="contrapeso">Autoportante (Contrapeso)</option>
                    <option value="metalica">Fijaci√≥n a Metal</option>
                    <option value="hormigon">Fijaci√≥n a Hormig√≥n (Peto/Losa)</option>
                </select>

                <div id="opts-b-contrapeso" class="conditional-box">
                    <label>Tipo de Superficie (Suelo)</label>
                    <select id="b-surface">
                        <option value="grava">Grava / Canto rodado</option>
                        <option value="asfaltica">Tela Asf√°ltica (Bituminosa)</option>
                        <option value="pvc_tpo">L√°mina PVC / TPO</option>
                        <option value="losa">Losa de Hormig√≥n / Baldosa</option>
                        <option value="delicado">Suelo Delicado (Requiere fieltro extra)</option>
                    </select>
                </div>

                <div id="opts-b-metal" class="conditional-box hidden">
                    <label>Tipo de Metal</label>
                    <input type="text" id="b-metal-desc" placeholder="Ej: Viga IPN, Chapa grecada...">
                    <label>¬øEs necesaria torniller√≠a pasante?</label>
                    <select id="b-metal-pasante">
                        <option value="no">No, remache o roscachapa</option>
                        <option value="si">S√≠, pasante con tuerca</option>
                    </select>
                </div>

                <div id="opts-b-hormigon" class="conditional-box hidden">
                    <label>Estado del Hormig√≥n</label>
                    <select id="b-hormigon-status">
                        <option value="bueno">Bueno / Nuevo</option>
                        <option value="malo">Viejo / Deteriorado (Requiere qu√≠mico)</option>
                    </select>
                    <label>Ancho del Peto (si aplica) - cm</label>
                    <input type="number" id="b-peto-width" placeholder="Ej: 20">
                </div>
            </div>
        </div>

        <div id="tech-linea" class="hidden">
            <div class="card">
                <h2>Soporte L√≠nea de Vida</h2>
                <label>Tipo de Estructura</label>
                <select id="lv-support-type" onchange="toggleLvOpts()">
                    <option value="sand02">Cubierta Chapa (Sandwich/Deck)</option>
                    <option value="poste">Poste Estructural (Sobre r√≠gido)</option>
                </select>

                <div id="opts-lv-chapa" class="conditional-box">
                    <label>Tipo de Chapa</label>
                    <select id="lv-chapa-type">
                        <option value="sandwich">Panel Sandwich (Doble chapa con aislante)</option>
                        <option value="grecada">Chapa Grecada Simple</option>
                        <option value="deck">Cubierta Deck (Con aislamiento e impermeabilizaci√≥n)</option>
                    </select>
                    
                    <label>Espesor Chapa / Distancia Correas</label>
                    <select id="lv-chapa-thick">
                        <option value="0.5">Est√°ndar (0.5mm - 0.6mm)</option>
                        <option value="0.7">Gruesa (> 0.63mm)</option>
                    </select>
                </div>

                <div id="opts-lv-poste" class="detail-box hidden">
                    <h3>Configuraci√≥n del Poste</h3>
                    
                    <label>Modelo de Poste (Altura)</label>
                    <select id="lv-post-model">
                        <optgroup label="Serie STA-10 (Tubo 100mm)">
                            <option value="STA-10-400">STA-10-400</option>
                            <option value="STA-10-600">STA-10-600</option>
                        </optgroup>
                        <optgroup label="Serie STA-30 (Tubo 42mm)" selected>
                            <option value="STA-30-300" selected>STA-30-300</option>
                            <option value="STA-30-400">STA-30-400</option>
                            <option value="STA-30-500">STA-30-500</option>
                            <option value="STA-30-600">STA-30-600</option>
                            <option value="STA-30-700">STA-30-700</option>
                        </optgroup>
                    </select>

                    <label>Material Base</label>
                    <select id="lv-base-mat">
                        <option value="hormigon">Hormig√≥n</option>
                        <option value="acero">Estructura Met√°lica</option>
                        <option value="madera">Viga de Madera</option>
                    </select>

                    <div style="margin-top: 15px;">
                        <div class="check-group">
                            <input type="checkbox" id="chk-contraplaca">
                            <label>Requiere Contraplaca (S√°ndwich a viga)</label>
                        </div>
                        <div class="check-group">
                            <input type="checkbox" id="chk-herreria" onchange="document.getElementById('desc-herreria').classList.toggle('hidden', !this.checked)">
                            <label>Requiere Herrer√≠a Especial / Adaptador</label>
                        </div>
                        <textarea id="desc-herreria" class="hidden" rows="2" placeholder="Describe la pieza especial necesaria (ej: abarcones para viga redonda)"></textarea>
                    </div>
                </div>
            </div>
        </div>

        <div class="card">
            <h2>Seguridad y Accesos</h2>
            <div class="check-group"><input type="checkbox" id="chk-grua"><label>Requiere Gr√∫a Externa</label></div>
            <div class="check-group"><input type="checkbox" id="chk-fragil"><label>Cubierta Fr√°gil (Necesita pasarelas)</label></div>
            <div class="check-group"><input type="checkbox" id="chk-existente"><label>L√≠nea existente para usar en montaje</label></div>
            <label>Notas Accesos:</label>
            <textarea id="txt-accesos" rows="2" placeholder="Ascensor, escaleras, llaves..."></textarea>
        </div>
    </div>

    <div id="tab-geometria" class="section">
        
        <div id="geo-barandilla">
            <div id="b-tramos-list"></div>
            <button class="btn-full btn-add" onclick="addBarandillaTramo()">+ A√±adir Tramo Recto</button>
        </div>

        <div id="geo-linea" class="hidden">
            <div class="card" style="background: #e3f2fd;">
                <label><input type="checkbox" id="lv-loop"> Es un sistema cerrado (Anillo)</label>
            </div>
            <div id="lv-tramos-list"></div>
            <button class="btn-full btn-add" onclick="addLvTramo()">+ A√±adir Segmento</button>
            <p id="lv-total-len" style="text-align: right; font-weight: bold; margin-top: 10px;">Total: 0.00 m</p>
        </div>
    </div>

    <div id="tab-fotos" class="section">
        <div class="card" style="text-align: center;">
            <input type="file" id="cam-input" accept="image/*" capture="environment" style="display:none" onchange="loadPhoto(event)">
            <button class="btn-full" style="background:#555; color:white;" onclick="document.getElementById('cam-input').click()">üì∑ Tomar Foto</button>
            
            <div id="canvas-container">
                <canvas id="editor"></canvas>
            </div>
            
            <div style="display:flex; gap:10px; justify-content:center;">
                <button onclick="enableDraw()" style="padding:5px 15px;">‚úèÔ∏è Pintar</button>
                <button onclick="clearDraw()" style="padding:5px 15px;">‚Ü∫ Limpiar</button>
                <button onclick="savePhoto()" style="padding:5px 15px; background:var(--success); color:white; border:none;">üíæ Guardar</button>
            </div>
        </div>
        
        <div class="card">
            <h3>Galer√≠a (<span id="photo-count">0</span>)</h3>
            <div class="gallery" id="gallery-grid"></div>
        </div>
    </div>

</div>

<div class="footer-fixed">
    <button class="btn-full btn-save" onclick="exportJSON()">üì§ Guardar y Generar Archivo</button>
</div>

<script>
    // --- ESTADO Y NAVEGACI√ìN ---
    let currentSystem = 'barandilla';
    document.getElementById('g-date').valueAsDate = new Date();

    function switchTab(tabId) {
        document.querySelectorAll('.section').forEach(s => s.classList.remove('active'));
        document.querySelectorAll('.tab-btn').forEach(b => b.classList.remove('active'));
        document.getElementById(tabId).classList.add('active');
        
        // Mapear bot√≥n activo
        const map = {'tab-general':0, 'tab-tecnico':1, 'tab-geometria':2, 'tab-fotos':3};
        document.querySelectorAll('.tab-btn')[map[tabId]].classList.add('active');
    }

    function setSystem(sys) {
        currentSystem = sys;
        // UI Botones
        document.getElementById('btn-barandilla').classList.toggle('active', sys === 'barandilla');
        document.getElementById('btn-linea').classList.toggle('active', sys === 'linea_vida');
        
        // Mostrar/Ocultar Secciones T√©cnicas
        document.getElementById('tech-barandilla').classList.toggle('hidden', sys !== 'barandilla');
        document.getElementById('tech-linea').classList.toggle('hidden', sys !== 'linea_vida');
        
        // Mostrar/Ocultar Secciones Geometr√≠a
        document.getElementById('geo-barandilla').classList.toggle('hidden', sys !== 'barandilla');
        document.getElementById('geo-linea').classList.toggle('hidden', sys !== 'linea_vida');
    }

    // --- L√ìGICA T√âCNICA BARANDILLA ---
    function toggleBarandillaOpts() {
        const type = document.getElementById('b-fix-type').value;
        document.getElementById('opts-b-contrapeso').classList.toggle('hidden', type !== 'contrapeso');
        document.getElementById('opts-b-metal').classList.toggle('hidden', type !== 'metalica');
        document.getElementById('opts-b-hormigon').classList.toggle('hidden', type !== 'hormigon');
    }

    // --- L√ìGICA T√âCNICA L√çNEA VIDA ---
    function toggleLvOpts() {
        const type = document.getElementById('lv-support-type').value;
        document.getElementById('opts-lv-chapa').classList.toggle('hidden', type !== 'sand02');
        document.getElementById('opts-lv-poste').classList.toggle('hidden', type !== 'poste');
    }

    // --- GEOMETR√çA: BARANDILLA ---
    function addBarandillaTramo() {
        const container = document.getElementById('b-tramos-list');
        const idx = container.children.length + 1;
        const html = `
            <div class="tramo-card b-tramo">
                <button class="remove-btn" onclick="this.parentElement.remove()">√ó</button>
                <h3>Tramo ${idx}</h3>
                ${idx > 1 ? `<div style="background:#eee; padding:5px; margin-bottom:5px; border-radius:4px;"><label>Uni√≥n con anterior:</label><select class="b-corner"><option value="90">Esquina 90¬∫</option><option value="var">Articulada</option></select></div>` : ''}
                <div style="display:grid; grid-template-columns: 2fr 1fr; gap:10px;">
                    <div><label>Longitud (m)</label><input type="number" class="b-len" step="0.01"></div>
                    <div><label>Rodapi√©</label><input type="checkbox" class="b-rodapie" style="margin-top:40px;"></div>
                </div>
                <label>Postes Fijos (m)</label><input type="text" class="b-fixed" placeholder="Ej: 1.5, 3.2">
            </div>`;
        container.insertAdjacentHTML('beforeend', html);
    }

    // --- GEOMETR√çA: L√çNEA VIDA ---
    function addLvTramo() {
        const container = document.getElementById('lv-tramos-list');
        const idx = container.children.length + 1;
        const html = `
            <div class="tramo-card lv-tramo" oninput="calcLvTotal()">
                <button class="remove-btn" onclick="this.parentElement.remove(); calcLvTotal()">√ó</button>
                <h3>Segmento ${idx}</h3>
                <label>Longitud Recta (m)</label><input type="number" class="lv-len" step="0.01" value="0">
                <div style="margin-top:10px; padding:10px; background:#e3f2fd; border-radius:4px;">
                    <label>Al final:</label>
                    <select class="lv-end" onchange="this.nextElementSibling.classList.toggle('hidden', this.value !== 'curva')">
                        <option value="nada">Sigue recto / Fin</option>
                        <option value="curva">Hay Curva</option>
                    </select>
                    <div class="hidden">
                        <label>√Ångulo (¬∫)</label><input type="number" class="lv-angle" value="90">
                        <label>Tipo</label><select class="lv-curve-type"><option value="AIO-EDLE-19">Flexible</option><option value="Rigida">R√≠gida</option></select>
                    </div>
                </div>
            </div>`;
        container.insertAdjacentHTML('beforeend', html);
    }

    function calcLvTotal() {
        let t = 0;
        document.querySelectorAll('.lv-len').forEach(i => t += parseFloat(i.value||0));
        document.getElementById('lv-total-len').innerText = `Total: ${t.toFixed(2)} m`;
    }

    // --- FOTOS (Canvas Simple) ---
    const canvas = document.getElementById('editor');
    const ctx = canvas.getContext('2d');
    let imgObj = new Image();
    let savedPhotos = [];
    let isDrawing = false;

    function loadPhoto(e) {
        if(e.target.files && e.target.files[0]) {
            const reader = new FileReader();
            reader.onload = function(evt) {
                imgObj.onload = function() {
                    const scale = Math.min(600 / imgObj.width, 1);
                    canvas.width = imgObj.width * scale;
                    canvas.height = imgObj.height * scale;
                    ctx.drawImage(imgObj, 0, 0, canvas.width, canvas.height);
                };
                imgObj.src = evt.target.result;
            };
            reader.readAsDataURL(e.target.files[0]);
        }
    }

    function enableDraw() {
        ctx.lineWidth = 5; ctx.strokeStyle = "red"; ctx.lineCap = "round";
        const start = (x,y) => { isDrawing=true; ctx.beginPath(); ctx.moveTo(x,y); };
        const move = (x,y) => { if(isDrawing) { ctx.lineTo(x,y); ctx.stroke(); } };
        const end = () => { isDrawing=false; };

        canvas.ontouchstart = (e) => { e.preventDefault(); const r=canvas.getBoundingClientRect(); start(e.touches[0].clientX-r.left, e.touches[0].clientY-r.top); };
        canvas.ontouchmove = (e) => { e.preventDefault(); const r=canvas.getBoundingClientRect(); move(e.touches[0].clientX-r.left, e.touches[0].clientY-r.top); };
        canvas.ontouchend = end;
        
        canvas.onmousedown = (e) => { const r=canvas.getBoundingClientRect(); start(e.clientX-r.left, e.clientY-r.top); };
        canvas.onmousemove = (e) => { const r=canvas.getBoundingClientRect(); move(e.clientX-r.left, e.clientY-r.top); };
        canvas.onmouseup = end;
    }
    
    function clearDraw() { ctx.drawImage(imgObj, 0, 0, canvas.width, canvas.height); }
    function savePhoto() {
        if(!canvas.width) return;
        savedPhotos.push(canvas.toDataURL('image/jpeg', 0.6));
        const grid = document.getElementById('gallery-grid');
        const img = document.createElement('img'); img.src = savedPhotos[savedPhotos.length-1]; img.className = 'thumb';
        grid.appendChild(img);
        document.getElementById('photo-count').innerText = savedPhotos.length;
        alert("Foto guardada");
    }

    // --- EXPORTAR JSON ---
    function exportJSON() {
        const data = {
            general: {
                cliente: document.getElementById('g-client').value,
                obra: document.getElementById('g-site').value,
                fecha: document.getElementById('g-date').value,
                sistema: currentSystem
            },
            checklist: {
                grua: document.getElementById('chk-grua').checked,
                fragil: document.getElementById('chk-fragil').checked,
                existente: document.getElementById('chk-existente').checked,
                accesos: document.getElementById('txt-accesos').value
            },
            fotos: savedPhotos
        };

        if (currentSystem === 'barandilla') {
            const fixType = document.getElementById('b-fix-type').value;
            let detail = {};
            if(fixType === 'contrapeso') detail.surface = document.getElementById('b-surface').value;
            if(fixType === 'metalica') { detail.type = document.getElementById('b-metal-desc').value; detail.pasante = document.getElementById('b-metal-pasante').value; }
            if(fixType === 'hormigon') { detail.status = document.getElementById('b-hormigon-status').value; detail.peto = document.getElementById('b-peto-width').value; }

            let lengths=[], toe=[], fixed=[], corners=[];
            document.querySelectorAll('.b-tramo').forEach((el, i) => {
                lengths.push(parseFloat(el.querySelector('.b-len').value)||0);
                toe.push(el.querySelector('.b-rodapie').checked);
                const f = el.querySelector('.b-fixed').value;
                if(f) fixed[i] = f.split(',').map(Number);
                if(i>0) corners.push(el.querySelector('.b-corner').value);
            });

            data.tecnico = {
                appTarget: 'app.js',
                fixType: fixType,
                fixDetail: detail,
                parameters: { lengths: lengths, toeBoards: toe, fixedPosts: fixed, esquinas: corners }
            };
        } else {
            const suppType = document.getElementById('lv-support-type').value;
            let lvParams = {};
            
            if(suppType === 'sand02') {
                lvParams.chapaType = document.getElementById('lv-chapa-type').value;
                lvParams.espesor = document.getElementById('lv-chapa-thick').value;
            } else {
                lvParams.posteModelo = document.getElementById('lv-post-model').value;
                lvParams.posteMat = document.getElementById('lv-base-mat').value;
                lvParams.contraplaca = document.getElementById('chk-contraplaca').checked;
                lvParams.herreria = document.getElementById('chk-herreria').checked ? document.getElementById('desc-herreria').value : 'No';
            }

            let curves = [], pos = 0;
            document.querySelectorAll('.lv-tramo').forEach(el => {
                const l = parseFloat(el.querySelector('.lv-len').value)||0;
                pos += l;
                if(el.querySelector('.lv-end').value === 'curva') {
                    curves.push({
                        posicion: parseFloat(pos.toFixed(2)),
                        angulo: parseFloat(el.querySelector('.lv-angle').value)||90,
                        tipo: el.querySelector('.lv-curve-type').value
                    });
                }
            });

            data.tecnico = {
                appTarget: suppType === 'sand02' ? 'calculations.js' : 'Calculations_postes.js',
                supportType: suppType,
                params: lvParams,
                layout: { longitud: pos, curvas: curves, loop: document.getElementById('lv-loop').checked }
            };
        }

        const blob = new Blob([JSON.stringify(data, null, 2)], {type : 'application/json'});
        const a = document.createElement('a');
        a.href = URL.createObjectURL(blob);
        a.download = `TomaDatos_${data.general.obra}_v3.json`;
        document.body.appendChild(a); a.click(); document.body.removeChild(a);
    }
    
    // Inicializar
    addBarandillaTramo();
    addLvTramo();
</script>

</body>
</html>